#!/bin/bash
# vi: et sts=4 sw=4 ts=4

DOCDIR_BASE='usr/doc'

# ensure non-translated messages
export LC_MESSAGES=C

bzr_rev() {
    local \
        DIR=${1:-$PWD}

    if [[ -d $DIR/.bzr ]]; then
        if hash bzr &>/dev/null; then
            (cd "$DIR" && bzr revno) 2>/dev/null
        fi
    fi
}

REV=$(bzr_rev "${1:-$PWD}")
if [[ -n $REV && $((REV+0)) -gt 0 ]]; then
    echo "$DOCDIR_BASE/$(basename -- "${1:-$PWD}")-r$REV"
else
    exec "$(dirname -- "$(readlink -f -- "$0")")/pkg-docdir" "$@"
fi
