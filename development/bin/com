#!/bin/bash
# vi: et sts=4 sw=4 ts=4

_COMPOSER=${_COMPOSER:-composer}

pushd . >/dev/null

while [[ $PWD != / ]]; do
    if [[ -e composer.json ]]; then
        exec "$_COMPOSER" \
            "$@"
    fi
    cd ..
done

popd >/dev/null

printf 'Warning: Failed to find composer.json\n' \
    >&2

exec "$_COMPOSER" \
    "$@"
