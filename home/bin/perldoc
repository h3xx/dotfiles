#!/bin/bash
# vi: et sts=4 sw=4 ts=4

# Give perldoc pretty man pages
# Script first conceived 2021-08-27

PERLDOC_OPTS=(
    -oman
)

next_bin() (
    # Find path to wrapped program
    BINNAME=${0##*/}
    while read -r BIN; do
        if [[ ! $BIN -ef $0 ]]; then
            printf '%s\n' \
                "$BIN"
            return 0
        fi
    done < <(type -aP -- "$BINNAME")
    printf 'Wrapped program not found in PATH: %s\n' \
        "$BINNAME" \
        >&2
    return 127
)

REALBIN=$(next_bin) || exit

exec \
    "$REALBIN" \
    "${PERLDOC_OPTS[@]}" \
    "$@"
