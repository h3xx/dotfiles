#!/bin/bash
# vi: et sts=4 sw=4 ts=4

# colorized manpages

next_bin() (
    # Find path to wrapped program
    BINNAME=${0##*/}
    while read -r BIN; do
        if [[ ! $BIN -ef $0 ]]; then
            printf '%s\n' \
                "$BIN"
            return 0
        fi
    done < <(type -aP -- "$BINNAME")
    printf 'Wrapped program not found in PATH: %s\n' \
        "$BINNAME" \
        >&2
    return 127
)

REALBIN=$(next_bin) || exit

LESS_TERMCAP_mb=$'\e[05m' \
LESS_TERMCAP_md=$'\e[01;38;5;38m' \
LESS_TERMCAP_me=$'\e[0m' \
LESS_TERMCAP_so=$'\e[07;38;5;154m' \
LESS_TERMCAP_se=$'\e[0m' \
LESS_TERMCAP_us=$'\e[04;01;38;5;165m' \
LESS_TERMCAP_ue=$'\e[0m' \
exec "$REALBIN" \
    "$@"
